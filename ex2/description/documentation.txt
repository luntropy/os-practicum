В началото на задачата правим нужните проверки, за да видим дали всички параметри са налични и дали са коректно въведени. Ако всичко е наред, в зависимост от избраната команда, влизаме в различни случаи. 

Решенията на подточките са комбинирани в една фукнция, която изкарва реда с намерения резултат и след това спрямо командата изкарва финалния резултат, за да се избегнат повторения при кода.

!!! Ако няма намерен резултат, нищо няма да бъде принтирано, exit 1. Ако е намерен резултат - exit 0.

Направени входни проверки, които изкарват exit код 1: 
1. В случая, когато липсват аргументи.
2. В случая, когато подаденият файл не е намерен.
3. В случая, когато не може да се чете (липса на права за четене).
4. В случая, когато командата не е позволена.
5. В случая, когато командата е "distance", подадените аргументи трябва да са четири, не три. В случай 1 се прави проверка за три аргумента. Това е причината да има 4-ти случай, където се гледа за четвърти аргумент единствено ако дадената команда е "distance".

!!! Приемат се командите единствено ако са с малки букви. Ако имаме някаква вариация, например Country, ZONES и т.н. са невалидни, т.е. ще бъдат отхвърлени.

а) За командата "country":
1. Правим проверка дали позивната е от тип 1, т.е. дали има точно тази позивна, предназначена за някоя държава.

!!! Забелязва се, че има граничен случай. При позивна "C7A", от тип 1, т.е. "=C7A" се вижда, че спада към Vienna Intl Ctr и Austria. В този случай е взет първият резултат, който е намерен.

!!! При използването на grep е зададено, да няма значение дали буквите са малки или големи. 
От пример 2 в подточка а): 
	Няма разлика между 9MCSS или 9Mcss. В двата случая резултата е East Malaysia. Ако имаше значение дали са главни или малки букви резултата щеше да прихване префикса 9M и да даде като резултат на 9Mcss - West Malaysia.

2. Проверяваме за префикси с различна дължина - четири символа, три символа, два символа или един символ.
Започваме от най-дългия префикс, т.е. по условие, ако има държава, прихваната с префикс от три символа и от два символа, се взима държавата с префикс от три символа.

!!! В Wikipedia (страницата дадена в условието на заданието), пише, че префиксите са с дължина до три символа, включително. В дадения файл има условия за принадлежност към една държава, които са от четири символа за префикс и поради тази причина се прави проверка и за този тип префикс.

Пример: 
	За Spratly Islands имаме следните префикси: BM9S BN9S BO9S BP9S BQ9S BU9S BV9S BW9S BX9S.

За да се избегнат множество дублирани проверки, ако позивната в с по-малко от четири символа, преди да се извърши търсенето във файла, се прави още една проверка, където се гледа дължината на позивната. Например, ако е с по-малко от четири символа, то няма да се търси условие с префикс от четири символа.

(В случайте, когато позивната е с по-малко от четири символа (ако не се правеха проверките за дължината на позивната), ще се извършат повече проверки. Например, ако е с три, ще влезе за проверка в случая, където се взимат първите четири символа, но ще вземе само три от символите. Това ще се дублира с втората проверка, където се взимат първите три символа.)

б) За командата "zones"
Командата работи по аналогичен начин, като командата "country". Първо намира дадената позивна и след това я анализираме. Ако позивната няма допълнителна информация за WAZ и ITU зоните, то взимаме информацията от колони 5 и 6, ако обаче има допълнителна информация, то гледаме тази от позивната.

Алгоритъм: 
1. Намира се позивната.
2. Взимат се дефолтните зададените стойности спрямо държавата, към която спада позивната.
3. Извлича се конкретната позивна (т.к. когато е подадена като аргумент не се знае дали има допълнителна информация за зоните).
4. Прави се проверка дали има допълнителна информация:
	4.1. Проверка дали има допълнителна информация за ITU зона и ако има, се обновява дефолтната стойност;
	4.2. Проверка дали има допълнителна информация за WAZ зона и ако има, се обновява дефолтната стойност.
5. Изкарваме резултата.
6. Излизаме с код 0.
7. Ако не е намерена дадената позивна, излизаме с код 1.

Понеже се използва функция, която връща реда с резултата и после се извежда от него с ново търсене само позивната, то може да се получи объркване, ако има позивна от тип 2 и позивна от тип 1 с една и съща стойност. Например "C7A" и "=C7A", в случая трябва да се вземе от тип 1 (по условие), но има вероятност да се срещне първо само префикса. Поради тази причина се правят две проверки, когато се извежда от реда само позивната.
 
в) За командата "distance"
Първоначално се намира цялата информацията за съответните позивни и след това се взимат само географските им ширини и дължини. Т.к. са в градуси се пресмятат в радиани и след това се изчислява разстоянието между двете точки, закръглено до 0 знака след десетичната запетая.

Алгоритъм: https://www.geeksforgeeks.org/program-distance-two-points-earth/

Бонус 1 - недовършено
В началото на файла, под останалите проверки, се прави проверка дали има зададена глобална променлива "CTY_FORMAT" и дали нейната стойност е "DAT".

Проверка: 
# if [[ ! -v CTY_FORMAT || ! ${CTY_FORMAT} == "DAT" ]]
# then
# 	fields=$(echo "2,5,6,7,8,10")
# else
# 	TO DO: (when the file format is DAT)
# fi.

Бонус 2
Добавена е проверка на позивната дали е във формат <префикс>/<инициал>. Ако е в такъв формат, се търси и втората страна, ако има намерен резултат се принтира в желаният формат.

Т.к. има вероятност втората страна да съвпадне с първата (ако втората позивна отговаря на същатата страна), например имаме позивната "HB9/HB100" (ще имаме резултат от вида Bulgaria (Bulgaria)), то е направена допълнителна проверка дали държавите съвпадат. Ако съвпадат изкарва резултата от вида Bulgaria, а не Bulgaria (Bulgaria).